<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8"/>
  <title>muu::strong_typedef struct | muu Miscellaneous useful utilities for C++</title>
  <link href="favicon.ico" rel="icon" type="image/vnd.microsoft.icon"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <meta content="#22272e" name="theme-color"/>
  <link href="poxy/poxy.css" referrerpolicy="no-referrer" rel="stylesheet"/>
  <script src="poxy/poxy.js"></script>
  <script>initialize_theme("dark");</script>
  <meta content="muu" name="twitter:title"/>
  <meta content="muu" property="og:title"/>
  <meta content="muu" itemprop="name"/>
  <meta content="Mark Gillard" name="author"/>
  <meta content="Mark Gillard" property="article:author"/>
  <meta content="Miscellaneous useful utilities for C++" name="description"/>
  <meta content="Miscellaneous useful utilities for C++" name="twitter:description"/>
  <meta content="Miscellaneous useful utilities for C++" property="og:description"/>
  <meta content="Miscellaneous useful utilities for C++" itemprop="description"/>
  <meta content="telephone=no" name="format-detection"/>
  <meta content="Poxy v0.11.1" name="generator"/>
  <meta content="strict-origin-when-cross-origin" name="referrer"/>
</head>
<body class="poxy-has-toc">
<header><nav id="navigation">
  <div class="m-container">
    <div class="m-row">
      <a class="m-col-t-8 m-col-m-none m-left-m" href="index.html" id="m-navbar-brand"><img alt="" src="logo.png"/>muu <span class="m-thin">Miscellaneous useful utilities for C++</span></a>
      <div class="m-col-t-4 m-hide-m m-text-right m-nopadr">
        <a class="m-doc-search-icon" href="#search" onclick="return showSearch()" title="Search"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
          <path d="m6 0c-3.31 0-6 2.69-6 6 0 3.31 2.69 6 6 6 1.49 0 2.85-0.541 3.89-1.44-0.0164 0.338 0.147 0.759 0.5 1.15l3.22 3.79c0.552 0.614 1.45 0.665 2 0.115 0.55-0.55 0.499-1.45-0.115-2l-3.79-3.22c-0.392-0.353-0.812-0.515-1.15-0.5 0.895-1.05 1.44-2.41 1.44-3.89 0-3.31-2.69-6-6-6zm0 1.56a4.44 4.44 0 0 1 4.44 4.44 4.44 4.44 0 0 1-4.44 4.44 4.44 4.44 0 0 1-4.44-4.44 4.44 4.44 0 0 1 4.44-4.44z" id="m-doc-search-icon-path"></path>
        </svg></a>
        <a href="#navigation" id="m-navbar-show" title="Show navigation"></a>
        <a href="#" id="m-navbar-hide" title="Hide navigation"></a>
      </div>
      <div class="m-col-t-12 m-show-m m-col-m-none m-right-m" id="m-navbar-collapse">
        <div class="m-row">
          <ol class="m-col-t-6 m-col-m-none">
            <li><a href="files.html">Files</a></li>
            <li><a href="modules.html">Modules</a></li>
            <li><a href="namespaces.html">Namespaces</a></li>
          </ol>
          <ol class="m-col-t-6 m-col-m-none" start="4">
            <li><a href="annotated.html">Classes</a></li>
            <li><a class="poxy-icon repo github poxy-external" href="https://github.com/marzer/muu" target="_blank" title="View on GitHub"><svg id="poxy-repo-icon" version="1.1" viewBox="0 0 50 50" xmlns="http://www.w3.org/2000/svg"><path d="M25,1.23a24.37,24.37,0,0,0-7.7,47.5C18.51,49,19,48.2,19,47.56s0-2.12,0-4.15c-6.78,1.47-8.21-3.27-8.21-3.27C9.61,37.33,8,36.58,8,36.58c-2.21-1.51.17-1.48.17-1.48a5.12,5.12,0,0,1,3.73,2.51c2.17,3.72,5.7,2.65,7.09,2a5.25,5.25,0,0,1,1.55-3.26c-5.41-.61-11.1-2.7-11.1-12A9.41,9.41,0,0,1,12,17.79a8.75,8.75,0,0,1,.24-6.45s2-.66,6.7,2.49a23.1,23.1,0,0,1,12.2,0c4.66-3.15,6.7-2.49,6.7-2.49A8.75,8.75,0,0,1,38,17.79a9.41,9.41,0,0,1,2.51,6.54c0,9.36-5.7,11.42-11.13,12a5.83,5.83,0,0,1,1.65,4.51c0,3.26,0,5.89,0,6.69,0,.65.44,1.41,1.68,1.17A24.38,24.38,0,0,0,25,1.23Z" fill="currentColor"></path></svg></a></li>
            <li><a class="poxy-icon theme" href="javascript:void(null);" id="poxy-theme-switch" onclick="toggle_theme(); return false;" role="button" title="Toggle dark and light themes"><svg id="poxy-theme-switch-img" version="1.1" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><circle cx="185.6708" cy="183.8122" fill="currentColor" r="65.625"></circle><path d="M185.6708,87.5622a13.1256,13.1256,0,0,0,13.125-13.125V52.5622a13.125,13.125,0,1,0-26.25,0v21.875A13.1257,13.1257,0,0,0,185.6708,87.5622Z" fill="currentColor"></path><path d="M99.051,115.7519a13.1236,13.1236,0,1,0,18.56-18.56L102.1442,81.726a13.1236,13.1236,0,0,0-18.5595,18.56Z" fill="currentColor"></path><path d="M89.4208,183.8122a13.1257,13.1257,0,0,0-13.125-13.125H54.4208a13.125,13.125,0,0,0,0,26.25h21.875A13.1256,13.1256,0,0,0,89.4208,183.8122Z" fill="currentColor"></path><path d="M99.051,251.8725,83.5847,267.3431a13.1236,13.1236,0,1,0,18.56,18.56l15.4663-15.4706a13.1236,13.1236,0,1,0-18.5595-18.56Z" fill="currentColor"></path><path d="M185.6708,280.0622a13.1258,13.1258,0,0,0-13.125,13.125v21.875a13.125,13.125,0,0,0,26.25,0v-21.875A13.1257,13.1257,0,0,0,185.6708,280.0622Z" fill="currentColor"></path><path d="M272.2907,251.8725a13.1236,13.1236,0,1,0-18.56,18.56l15.4663,15.4706a13.1236,13.1236,0,1,0,18.56-18.56Z" fill="currentColor"></path><path d="M330.0458,183.8122a13.1257,13.1257,0,0,0-13.125-13.125h-21.875a13.125,13.125,0,0,0,0,26.25h21.875A13.1256,13.1256,0,0,0,330.0458,183.8122Z" fill="currentColor"></path><path d="M263.0109,119.5971a13.0824,13.0824,0,0,0,9.28-3.8452l15.4663-15.4663a13.1236,13.1236,0,1,0-18.56-18.56L253.7312,97.1923a13.125,13.125,0,0,0,9.28,22.4048Z" fill="currentColor"></path><path d="M456.9379,401.6714a63.97,63.97,0,0,1-14.9963,7.2055c-19.6448,6.5283-41.8787,2.9566-58.1439-9.8523a68.9311,68.9311,0,0,1-10.835-10.8339c-12.8088-16.2663-16.3806-38.5-9.8523-58.1471a63.8444,63.8444,0,0,1,7.2077-14.9931,8.8036,8.8036,0,0,0-10.1172-13.3034,87.5188,87.5188,0,1,0,110.0372,110.04A8.8,8.8,0,0,0,456.9379,401.6714Z" fill="currentColor"></path></svg></a></li>
            <li class="m-show-m"><a class="m-doc-search-icon" href="#search" onclick="return showSearch()" title="Search"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
              <use href="#m-doc-search-icon-path"></use>
            </svg></a></li>
          </ol>
        </div>
      </div>
    </div>
  </div>
</nav></header>
<main><article>
  <div class="m-container m-container-inflatable">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <h1>
          <div class="m-doc-include m-code m-inverted m-right-m m-text-right"><span class="cp">#include</span> <a class="cpf" href="strong__typedef_8h.html">&lt;muu/strong_typedef.h&gt;</a></div>
          <div class="m-doc-template">template&lt;typename ValueType, typename Tag, template&lt;typename&gt; typename... Traits&gt;</div>
          <span class="m-breadcrumb"><a href="namespacemuu.html">muu</a>::<wbr/></span>strong_typedef <span class="m-thin">struct</span>
        </h1>
        <p>A utility class for creating 'strong typedefs'.</p>
        <table class="m-table m-fullwidth m-flat">
          <thead>
            <tr><th colspan="2">Template parameters</th></tr>
          </thead>
          <tbody>
            <tr>
              <td style="width: 1%">ValueType</td>
              <td>The underlying value type held by the typedef object. May be a reference. May not be cv-qualified unless it is also a reference.</td>
            </tr>
            <tr>
              <td>Tag</td>
              <td>The tag type necessary to uniquely identify this typedef. May be an incomplete type.</td>
            </tr>
            <tr>
              <td>Traits</td>
              <td>Additional CRTP-based 'traits' for adding custom functionality.</td>
            </tr>
          </tbody>
        </table>
        <nav class="m-block m-default poxy-toc" id="poxy-toc">
          <h3>Contents</h3>
          <ul>
            <li>
              Reference
              <ul>
                <li><a href="#pub-types">Public types</a></li>
                <li><a href="#typeless-methods">Constructors, destructors, conversion operators</a></li>
                <li><a href="#pub-methods">Public functions</a></li>
                <li><a href="#pub-attribs">Public variables</a></li>
              </ul>
            </li>
          </ul>
        </nav>
<p>Strong typedefs use the C++ type system to create compile-time guarantees for values that otherwise might only be represented by regular typedefs, and thus lose their semantic meaning when passed to the compiler. Doing so prevents an entire class of bugs where incompatible values can be accidentally used interchangeably because they were of same/convertible type:</p><pre class="m-code"><span class="cp">#ifdef </span><span class="fm">DO_BAD_STUFF</span>
<span class="k">using</span> <span class="nc">thing_id</span>    <span class="o">=</span> <span class="k">int</span><span class="p">;</span>
<span class="k">using</span> <span class="nc">thing_index</span> <span class="o">=</span> <span class="k">int</span><span class="p">;</span>
<span class="cp">#else</span>
<span class="k">using</span> <span class="nc">thing_id</span>    <span class="o">=</span> <span class="nn">muu</span><span class="o">::</span><span class="nc">strong_typedef</span><span class="o">&lt;</span><span class="k">int</span><span class="p">,</span> <span class="k">struct</span> <span class="nc">thing_id_tag</span><span class="o">&gt;</span><span class="p">;</span>
<span class="k">using</span> <span class="nc">thing_index</span> <span class="o">=</span> <span class="nn">muu</span><span class="o">::</span><span class="nc">strong_typedef</span><span class="o">&lt;</span><span class="k">int</span><span class="p">,</span> <span class="k">struct</span> <span class="nc">thing_index_tag</span><span class="o">&gt;</span><span class="p">;</span>
<span class="cp">#endif</span>

<span class="k">void</span> <span class="nf">do_important_stuff</span><span class="p">(</span><span class="nc">thing_id</span> <span class="n">id</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">//</span>
<span class="p">}</span>

<span class="k">void</span> <span class="nf">this_function_does_bad_stuff</span><span class="p">(</span><span class="nc">thing_index</span> <span class="n">index</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nf">do_important_stuff</span><span class="p">(</span><span class="n">index</span><span class="p">);</span> <span class="c1">// won't compile with strong typedefs</span>
<span class="p">}</span></pre><p>By default the only operations provided are:</p><ul><li>explicit construction with an initializer</li><li>default construction (if supported by the value type)</li><li>copy construction + assignment (if supported by the value type)</li><li>move construction + assignment (if supported by the value type)</li><li>explicit casts to references of the underlying value type</li></ul><pre class="m-code"><span class="k">using</span> <span class="n">strong_string</span> <span class="o">=</span> <span class="nn">muu</span><span class="o">::</span><span class="nc">strong_typedef</span><span class="o">&lt;</span><span class="nn">std</span><span class="o">::</span><span class="nc">string</span><span class="p">,</span> <span class="k">struct</span> <span class="nc">strong_string_tag</span><span class="o">&gt;</span><span class="p">;</span>

<span class="n">strong_string</span> <span class="n">s</span><span class="p">{</span> <span class="s">"my string could beat up your string"s</span> <span class="p">};</span>
<span class="k">auto</span><span class="o">&amp;</span> <span class="n">ref</span> <span class="o">=</span> <span class="k"><a class="m-doc poxy-injected poxy-external" href="https://en.cppreference.com/w/cpp/language/static_cast" target="_blank">static_cast</a></span><span class="o">&lt;</span><span class="nn">std</span><span class="o">::</span><span class="nc">string</span><span class="o">&amp;&gt;</span><span class="p">(</span><span class="n">s</span><span class="p">);</span></pre><p>Additional operations can be added using CRTP-based 'traits':</p><pre class="m-code"><span class="k">using</span> <span class="nc">thing_index</span> <span class="o">=</span> <span class="nn">muu</span><span class="o">::</span><span class="nc">strong_typedef</span><span class="o">&lt;</span><span class="k">int</span><span class="p">,</span> <span class="k">struct</span> <span class="nc">thing_index_tag</span><span class="p">,</span>
    <span class="nn"><a class="m-doc poxy-injected" href="namespacemuu_1_1strong__typedef__traits.html">muu::strong_typedef_traits</a></span><span class="o">::</span><span class="nc">incrementable</span><span class="p">,</span> <span class="c1">// adds ++</span>
    <span class="nn"><a class="m-doc poxy-injected" href="namespacemuu_1_1strong__typedef__traits.html">muu::strong_typedef_traits</a></span><span class="o">::</span><span class="nc">decrementable</span><span class="p">,</span> <span class="c1">// adds --</span>
    <span class="nn"><a class="m-doc poxy-injected" href="namespacemuu_1_1strong__typedef__traits.html">muu::strong_typedef_traits</a></span><span class="o">::</span><span class="nc">comparable</span>     <span class="c1">// adds ==, !=, &lt;, &lt;=, &gt;, &gt;=</span>
<span class="o">&gt;</span><span class="p">;</span></pre><aside class="m-note m-default"><h4>See also</h4><ul><li><a class="poxy-external" href="https://www.jambit.com/en/latest-info/toilet-papers/strong-typedefs/" target="_blank">Strong typedefs</a></li><li><a class="m-doc" href="namespacemuu_1_1strong__typedef__traits.html">muu::<wbr/>strong_typedef_traits</a></li></ul></aside>
        <section id="pub-types">
          <h2><a href="#pub-types">Public types</a></h2>
          <dl class="m-doc">
            <dt id="a26c7bd7a2caf1f43d72a55bf2c6fec4a">
              using <a class="m-doc-self" href="#a26c7bd7a2caf1f43d72a55bf2c6fec4a">value_type</a> = ValueType
            </dt>
            <dd>The typedef's underlying value type.</dd>
          </dl>
        </section>
        <section id="typeless-methods">
          <h2><a href="#typeless-methods">Constructors, destructors, conversion operators</a></h2>
          <dl class="m-doc">
            <dt id="ad0712871a5e6ee370d0629de1dfdb487">
              <span class="m-doc-wrap-bumper"><a class="m-doc-self" href="#ad0712871a5e6ee370d0629de1dfdb487">strong_typedef</a>(</span><span class="m-doc-wrap">) <span class="m-label m-flat m-info">defaulted</span></span>
            </dt>
            <dd>Default constructor.</dd>
            <dt id="a1e8459918ead7bb4391c8fcf789fce85">
              <span class="m-doc-wrap-bumper"><a class="m-doc-self" href="#a1e8459918ead7bb4391c8fcf789fce85">strong_typedef</a>(</span><span class="m-doc-wrap">const <a class="m-doc" href="structmuu_1_1strong__typedef.html">strong_<wbr/>typedef</a>&amp;) <span class="m-label m-flat m-info">defaulted</span> <span class="m-label m-flat m-primary">constexpr</span></span>
            </dt>
            <dd>Copy constructor.</dd>
            <dt id="a09a80bbb74fd34ab3267d3d8830fc2d5">
              <span class="m-doc-wrap-bumper"><a class="m-doc-self" href="#a09a80bbb74fd34ab3267d3d8830fc2d5">strong_typedef</a>(</span><span class="m-doc-wrap"><a class="m-doc" href="structmuu_1_1strong__typedef.html">strong_<wbr/>typedef</a>&amp;&amp;) <span class="m-label m-flat m-info">defaulted</span> <span class="m-label m-flat m-primary">constexpr</span></span>
            </dt>
            <dd>Move constructor.</dd>
            <dt id="a5fb7e66378666e345675dbbde2b33f14">
              <span class="m-doc-wrap-bumper"><a class="m-doc-self" href="#a5fb7e66378666e345675dbbde2b33f14">strong_typedef</a>(</span><span class="m-doc-wrap">const <a class="m-doc" href="structmuu_1_1strong__typedef.html#a26c7bd7a2caf1f43d72a55bf2c6fec4a">value_<wbr/>type</a>&amp; val) <span class="m-label m-flat m-info">explicit</span>  <span class="m-label m-flat m-primary">constexpr</span> <span class="m-label m-flat m-success">noexcept(…)</span></span>
            </dt>
            <dd>Value copy constructor.</dd>
            <dt id="a794bef4669d3e752742a663ba118547f">
              <span class="m-doc-wrap-bumper"><a class="m-doc-self" href="#a794bef4669d3e752742a663ba118547f">strong_typedef</a>(</span><span class="m-doc-wrap"><a class="m-doc" href="structmuu_1_1strong__typedef.html#a26c7bd7a2caf1f43d72a55bf2c6fec4a">value_<wbr/>type</a>&amp;&amp; val) <span class="m-label m-flat m-info">explicit</span>  <span class="m-label m-flat m-primary">constexpr</span> <span class="m-label m-flat m-success">noexcept(…)</span></span>
            </dt>
            <dd>Value move constructor.</dd>
            <dt id="a995a04e4a8782bfced69213258d89354">
              <span class="m-doc-wrap-bumper"><a class="m-doc-self" href="#a995a04e4a8782bfced69213258d89354">strong_typedef</a>(</span><span class="m-doc-wrap"><a class="m-doc" href="structmuu_1_1strong__typedef.html#a26c7bd7a2caf1f43d72a55bf2c6fec4a">value_<wbr/>type</a> val) <span class="m-label m-flat m-info">explicit</span>  <span class="m-label m-flat m-primary">constexpr</span> <span class="m-label m-flat m-success">noexcept</span></span>
            </dt>
            <dd>Value constructor.</dd>
          </dl>
        </section>
        <section id="pub-methods">
          <h2><a href="#pub-methods">Public functions</a></h2>
          <dl class="m-doc">
            <dt id="a752d4f74c06fe15e04f7a5dc6748fc34">
              <span class="m-doc-wrap-bumper">auto <a class="m-doc-self" href="#a752d4f74c06fe15e04f7a5dc6748fc34">operator=</a>(</span><span class="m-doc-wrap">const <a class="m-doc" href="structmuu_1_1strong__typedef.html">strong_<wbr/>typedef</a>&amp;) -&gt; <a class="m-doc" href="structmuu_1_1strong__typedef.html">strong_<wbr/>typedef</a>&amp; <span class="m-label m-flat m-info">defaulted</span></span>
            </dt>
            <dd>Copy-assignment operator.</dd>
            <dt id="a3dbe075089d67983f847ee2e449803b9">
              <span class="m-doc-wrap-bumper">auto <a class="m-doc-self" href="#a3dbe075089d67983f847ee2e449803b9">operator=</a>(</span><span class="m-doc-wrap"><a class="m-doc" href="structmuu_1_1strong__typedef.html">strong_<wbr/>typedef</a>&amp;&amp;) -&gt; <a class="m-doc" href="structmuu_1_1strong__typedef.html">strong_<wbr/>typedef</a>&amp; <span class="m-label m-flat m-info">defaulted</span></span>
            </dt>
            <dd>Move-assignment operator.</dd>
          </dl>
        </section>
        <section id="pub-attribs">
          <h2><a href="#pub-attribs">Public variables</a></h2>
          <dl class="m-doc">
            <dt id="a278bfc333850d5f772308cc2faf71150">
              <a class="m-doc" href="structmuu_1_1strong__typedef.html#a26c7bd7a2caf1f43d72a55bf2c6fec4a">value_<wbr/>type</a> <a class="m-doc-self" href="#a278bfc333850d5f772308cc2faf71150">value</a>
            </dt>
            <dd>The underlying value stored in the typedef.</dd>
          </dl>
        </section>
      </div>
    </div>
  </div>
</article></main>
<div class="m-doc-search" id="search">
  <a href="#!" onclick="return hideSearch()"></a>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-m-8 m-push-m-2">
        <div class="m-doc-search-header m-text m-small">
          <div><span class="m-label m-default">Tab</span> / <span class="m-label m-default">T</span> to search, <span class="m-label m-default">Esc</span> to close</div>
          <div id="search-symbolcount">…</div>
        </div>
        <div class="m-doc-search-content">
          <form>
            <input autocomplete="off" autofocus="autofocus" disabled="disabled" id="search-input" name="q" placeholder="Loading …" spellcheck="false" type="search"/>
          </form>
          <noscript class="m-text m-danger m-text-center">Unlike everything else in the docs, the search functionality <em>requires</em> JavaScript.</noscript>
          <div class="m-text m-dim m-text-center" id="search-help">
            <p class="m-noindent">Search for symbols, directories, files, pages or
            modules. You can omit any prefix from the symbol or file path; adding a
            <code>:</code> or <code>/</code> suffix lists all members of given symbol or
            directory.</p>
            <p class="m-noindent">Use <span class="m-label m-dim">↓</span>
            / <span class="m-label m-dim">↑</span> to navigate through the list,
            <span class="m-label m-dim">Enter</span> to go.
            <span class="m-label m-dim">Tab</span> autocompletes common prefix, you can
            copy a link to the result using <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">L</span> while <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">M</span> produces a Markdown link.</p>
          </div>
          <div class="m-text m-warning m-text-center" id="search-notfound">Sorry, nothing was found.</div>
          <ul id="search-results"></ul>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="search-v2.js"></script>
<script async="async" src="searchdata-v2.js"></script>
<footer><nav>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        
<a class="poxy-external" href="https://github.com/marzer/muu" target="_blank">GitHub</a>
• <a class="poxy-external" href="https://github.com/marzer/muu/issues" target="_blank">Report an issue</a>
• <a class="poxy-external" href="https://github.com/marzer/muu/blob/master/LICENSE" target="_blank">License</a>
• <a download="" href="muu.tagfile.xml" target="_blank" type="text/xml">Doxygen tagfile</a>
<br/><br/>
Site generated using <a class="poxy-external" href="https://github.com/marzer/poxy/" target="_blank">Poxy</a>

      </div>
    </div>
  </div>
</nav></footer>


</body></html>